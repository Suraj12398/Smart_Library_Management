package com.smartlab.ui;

import java.sql.Date;
import java.time.LocalDate;
import java.util.List;

import com.smartlab.dao.StudentDao;
import com.smartlab.dao.StudentDaoImpl;
import com.smartlab.entity.Book;
import com.smartlab.entity.Feedback;
import com.smartlab.entity.Rental;
import com.smartlab.entity.SessionStd;
import com.smartlab.entity.Student;

public class StudentUi {
	
	
	private static void availableBook() {
		// TODO Auto-generated method stub
		StudentDao sd=new StudentDaoImpl();
		
		List<Book> bookList=sd.findAvailableBooks();
		
		for(Book b:bookList) {
			System.out.println(b.toString());
		}
		
	}
	
	private static void searchByGenre() {
		// TODO Auto-generated method stub
StudentDao sd=new StudentDaoImpl();
		String genre="t";
		List<Book> bookList=sd.searchBooksByGenre(genre);
		
		if(bookList.size()==0) {
			System.out.println("No Book Available");
		}else {
			for(Book b:bookList) {
				System.out.println(b.toString());
			}	
		}
		
		
	}
	private static void searchByTitle() {
		// TODO Auto-generated method stub
		StudentDao sd=new StudentDaoImpl();
		String title="club";
		List<Book> bookList=sd.searchBooksByTitle(title);
		
		if(bookList.size()==0) {
			System.out.println("No Book Available");
		}else {
			for(Book b:bookList) {
				System.out.println(b.toString());
			}	
		}
		
	}
	private static void registerStudent() {
		// TODO Auto-generated method stub
		System.out.println("PLease Add Student");
		Student std=new Student("sumit kumar","sk","sk",null);
		
		StudentDao ls=new StudentDaoImpl();
		
		
		Student t=ls.save(std);
		if(t==null) {
			System.out.println("no Student added");
		}else {
			System.out.println("Student added successfull");
		}
		
	}
	private static void loginStudent() {
		// TODO Auto-generated method stub
		String user="sk";
		String password="sk";
		
		StudentDao ls=new StudentDaoImpl();
		ls.login(user,password);
		System.out.println("Welcome "+ SessionStd.getCurrentStd().getStudentName());
		
	}
	private static void bookRent() {
		// TODO Auto-generated method stub
		StudentDao ls=new StudentDaoImpl();
		ls.findAvailableBooks().forEach(a->System.out.println(a));
		
		int id=2;
		StudentDao st=new StudentDaoImpl();
		Book book=st.findBookById(id);
//		Student std=new Student("sumit kumar","sk","sk",null);
		Rental rental=new Rental(null,book,Date.valueOf(LocalDate.now()),null);
		st.saveRental(rental);
	}
	private static void returnBook() {
		// TODO Auto-generated method stub
		StudentDao ls=new StudentDaoImpl();
		
		int id=4;
		int idb=2;
		StudentDao st=new StudentDaoImpl();
		Book book=st.findBookById(idb);
//		Student std=new Student("sumit kumar","sk","sk",null);
		Rental rental=new Rental(null,book,Date.valueOf(LocalDate.now()),Date.valueOf("2023-07-23"));
		
//		Rental rental=new Rental(null,book,Date.valueOf(LocalDate.now()),Date.valueOf(LocalDate.now()));rental.setRentalId(id);
		st.updateRental(rental);
		
		
	}
	private static void giveFeedback() {
		// TODO Auto-generated method stub
		StudentDao ls=new StudentDaoImpl();
		ls.findAvailableBooks().forEach(a->System.out.println(a));
		int id=2;
		StudentDao st=new StudentDaoImpl();
		Book book=st.findBookById(id);

		Feedback feedback=new Feedback();
		st.saveFeedback(feedback);
	}
	
	
public static void main(String[] args) {
//	availableBook();
//	registerStudent();
//	searchByGenre();
//	searchByTitle();
//	loginStudent();
//	bookRent();
//	returnBook();
	giveFeedback();
}














}
